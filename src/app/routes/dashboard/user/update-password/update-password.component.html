<form nz-form [formGroup]="form" (ngSubmit)="submit()">
  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="8" [nzFor]="'phoneNum'" nzRequired>电话</nz-form-label>
    <nz-form-control [nzSm]="18" [nzXs]="16" [nzErrorTip]="phoneErrorTpl">
      <input
        formControlName="phoneNum"
        name="phoneNum"
        id="phoneNum"
        nz-input
        [disabled]="true"
        placeholder="请输入电话"
        autocomplete="off"
      />
      <ng-template #phoneErrorTpl let-phoneNum>
        <ng-container *ngIf="phoneNum.hasError('required')">
          电话是必填项!
        </ng-container>
      </ng-template>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="8" [nzFor]="'oldPassword'" nzRequired>原密码</nz-form-label>
    <nz-form-control [nzSm]="18" [nzXs]="16" [nzErrorTip]="oldPasswordErrorTpl">
      <nz-input-group [nzSuffix]="oldPasswordSuffixTemplate">
        <input
          [type]="oldPasswordVisible ? 'text' : 'password'"
          nz-input
          id="oldPassword"
          placeholder="请输入原密码"
          formControlName="oldPassword"
          autocomplete="off"
        />
      </nz-input-group>
      <ng-template #oldPasswordSuffixTemplate>
        <i
          nz-icon
          [nzType]="oldPasswordVisible ? 'eye-invisible' : 'eye'"
          nzTheme="outline"
          (click)="oldPasswordVisible = !oldPasswordVisible"
        ></i>
      </ng-template>
      <ng-template #oldPasswordErrorTpl let-oldPassword>
        <ng-container *ngIf="oldPassword.hasError('required')">
          原密码是必填项!
        </ng-container>
      </ng-template>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="8" [nzFor]="'password'" nzRequired>新密码</nz-form-label>
    <nz-form-control [nzSm]="18" [nzXs]="16" [nzErrorTip]="passwordErrorTpl">
      <nz-input-group [nzSuffix]="passwordSuffixTemplate">
        <input
          [type]="passwordVisible ? 'text' : 'password'"
          nz-input
          id="password"
          placeholder="请输入新密码"
          formControlName="password"
          (ngModelChange)="updateConfirmValidator()"
          autocomplete="off"
        />
      </nz-input-group>
      <ng-template #passwordSuffixTemplate>
        <i
          nz-icon
          [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
          nzTheme="outline"
          (click)="passwordVisible = !passwordVisible"
        ></i>
      </ng-template>
      <ng-template #passwordErrorTpl let-password>
        <ng-container *ngIf="password.hasError('required')">
          新密码是必填项!
        </ng-container>
      </ng-template>
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-label [nzSm]="6" [nzXs]="8" [nzFor]="'verifyPassword'" nzRequired>重复新密码</nz-form-label>
    <nz-form-control [nzSm]="18" [nzXs]="16" [nzErrorTip]="verifyPasswordErrorTpl">
      <nz-input-group [nzSuffix]="verifyPasswordSuffixTemplate">
        <input
          [type]="verifyPasswordVisible ? 'text' : 'password'"
          nz-input
          id="verifyPassword"
          placeholder="请再次输入新密码"
          formControlName="verifyPassword"
          autocomplete="off"
        />
      </nz-input-group>
      <ng-template #verifyPasswordSuffixTemplate>
        <i
          nz-icon
          [nzType]="verifyPasswordVisible ? 'eye-invisible' : 'eye'"
          nzTheme="outline"
          (click)="verifyPasswordVisible = !verifyPasswordVisible"
        ></i>
      </ng-template>
      <ng-template #verifyPasswordErrorTpl let-verifyPassword>
        <ng-container *ngIf="verifyPassword.hasError('required')">
          重复密码是必填项!
        </ng-container>
        <ng-container *ngIf="verifyPassword.hasError('confirm')">
          两次输入的密码不一致!
        </ng-container>
      </ng-template>
    </nz-form-control>
  </nz-form-item>
  <div class="text-right">
    <button nz-button type="button" (click)="cancel()" [nzLoading]="uploading">
      取消
    </button>
    <button nz-button [nzType]="'primary'" [disabled]="!form.valid" type="submit" [nzLoading]="uploading">
      确认
    </button>
  </div>
</form>
